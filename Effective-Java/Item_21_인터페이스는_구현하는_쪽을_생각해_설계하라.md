인터페이스에서 디폴트 메서드를 선언하면 그 인터페이스를 구현한 후 디폴트 메서드를 재정의 하지 않은 모든 클래스에서 디폴트 구현이 쓰이게 된다. 이처럼 자바에도 인터페이스에 메서드를 구현할 수 있는 길이 열렸지만 모든 기존 구현체들과 매끄럽게 연동되리라고는 보장받지 못한다. 그렇지만 모든 상황에서 불변식을 해치지 않는 디폴트 메서드를 작성하기란 어려운 법이다.

java 8에 추가된 removeIf 메서드를 예로 생각해보자. 이 메서드는 주어진 불리언 함수가 true 반환하는 모든 원소를 제거한다.



디폴트 메서드는  (컴파일에 성공하더라도) 기존 구현체에 런타임 오류를 일으킬 수 있다. 흔한 일은 아니지만, 나에게는 일어나지 않으리라는 보장도 없다. 현재 자바 8에는 꽤 많은 디폴트 메서드를 추가했고, 그 결과 기존에 짜여진 많은 자바코드가 영향을 받은 것으로 알려져 있다!!

그렇기 때문에 기존 인터페이스에 디폴트 메서드로 새 메서드를 추가하는 일은 꼭 필요한 경우가 아니라면 피해야 한다. 추가하려는 디폴트 메서드가 기존 구현체들과 충돌하지는 않을지 심사숙고 해야만 한다. 반면 새로운 인터페이스를 만든다면 표준적인 메서드를 구현을 제공하는데 아주 유용한 수단이며, 그 인터페이스를 더 쉽게 구현해 활용할 수 있게끔 한다.

한편, 디폴트 메서드는 인터페이스로부터 메서드를 제거하거나 기존 메서드의 시그니처를 수정하는 용도가 아님을 명심해야 한다. 이런 형태로 인터페이스를 변경하면 반드시 기존 클라이언를 망가뜨리게 된다.

새로운 인터페이스를 정의해서 릴리즈 하는 경우라면 새로 개발한 인터페이스에 대한 충분한 테스트가 필요하다. 릴리즈 전에 바로 잡을 기회가 있다면 바로 잡는게 좋다 !!

