# 1장 객체, 설계

Audience

Bag

Tickket

Invitation

```
관람객
소극장
초대장
티켓
현금
가방
상영관
```

Ticket은 TikcetOffice에서 만듦

TicketSeller에 의해 TikcetOffice에서 Ticket이 발급된다

소프트웨어 모듈의 3가지 목적

1. 실행 중에 제대로 동작해야 한다
2. 변경을 위해 존재해야 한다
3. 코드를 읽는 사람과 의사소통을 해야 한다

### 변경에 취약한 코드

의존성이라는 건 어떤 객체가 변경될 때 그 객체에게 의존하는 다른 객체도 함께 변경될 수 있다.

- 자기 자신의 문제를 스스로 해결하도록 코드를 변경하면 변경에 대비할 수 있고 의존성이 낮아진다

객체 사이의 의존성이 과한 경우 **결합도**가 높다고 한다. 결합도가 높아지면 높아질수록 한쪽 객체에서 변경될 경우 다른 쪽에서도 변경될 수도 있다.

> 최소한의 의존성만 유지하고 불필요한 의존성을 제거한다
> 

### 설계 개선하기

현재코드 : theater가 관란객의 가방과 매표소에 접근하기 때문에 코드를 이해하기 힘들고 변경에 취약함

해결방법 > 극장이 관객과 매표소 직원에 대해서 너무 세세한 부분까지 알지 못하도록 정보를 차단하면 된다. 가방은 관람객이 스스로 처리하게 하고, 판매원이 매표소의 티켓과 판매 요금을 다루게 하면 된다.

### 자율성 높이기

캡슐화를 통해서 감추고 싶은 것들은 감추어서 구현을 한다. 관객과 매표소 직원은 자신이 가지고 있는 것은 자신이 관리하도록 하는 것

### 캡술화와 응집도

핵심은 객체 내부의 상태를 캡슐화하는 것, 객체 간에는 오직 메시지를 통해서만 상호작용 하도록 한다. **밀접한 작업만 수행하고 관련 없는 것들은 다른 객체에게 위임**하는 객체를 가리켜 응집도가 높다고 말함

> 작가가 생각하는 휼륭한 객체지향 설계
외부의 간섭을 최대한 배제하고 메세지를 통해서만 협력하는 자율적인 객체들의 공동체를 만드는 것
> 

### 절차지향과 객체지향

휼륭한 객체지향 설계의 핵심은 캡슐화를 이용해 의존성을 적절히 관리함으로써 객체 사이의 결합도를 낮추는 것이다.

### 책임의 이동

데이터와 데이터를 사용하는 프로세스가 별도의 객체에 위치하고 있다면 절차적 프로그래밍 방식을 따를 확률이 높다. 

설계를 어렵게 만드는 것은 의존성이다. 해결 방법은 불필요한 의존성을 제거함으로써 객체 사이의 결합도를 낮추는 것이다.

### 객체지향 설계

- 설계가 필요한 이유
    
    설계란 코드를 배치하는 것. 설계와 구현을 떨어뜨리는 것은 불가능하다. 설계는 코드를 작성하는 매 순간 코드를 어떻게 배치할 것인지 결정하는데서 나온다. 설계는 코드의 일부이고 코드를 작성하지 않고서는 검증할 수 있다.
    
- 좋은 설계
    
    **오늘 요구하는 기능을 온전히 수행하면서 내일의 변경을 매끄럽게 수용할 수 있는 설계**
    개발 시점에 구현에 필요한 모든 요구사항을 수집하는 것은 불가능에 가깝다.