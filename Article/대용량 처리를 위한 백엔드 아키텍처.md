# 대용량 처리를 위한 백엔드 아키텍처

![Untitled](Untitled%205.png)

### 복잡한 데이터 요구와 과제 해결

핵심 서비스 계층을 만듦 → 핵심 서비스 계층에는 비즈니스 로직 코드를 통합하고 데이터를 제공함 ‘2가지’ 목적

- 고가용성을 제공하고 사고 발생 시 최단 시간 내에 해결
- 높은 읽기 트래픽 처리
- 데이터의 일관성, 최신성 보장
- 비즈니스 로직 통합 → frontend에서 복잡성과 코드중복성 제거 (데이터 처리하는 것을 말하는 듯)

핵심 서비스 계층은 모든 마이크로서비스의 모든 데이터 업데이트를 따라갈 필요가 없음

> 대신에 데이터를 대기열로 보내고 이를 nosql 데이터베이스인 공통 저장소에 저장한다. nosql db를 사용하면 단일 읽기에서 최종 일관성을 활용하고 모든 MS에서 데이터를 가져올 수 있음
> 

- [ ]  읽기 캐시 계층
    
    높은 처리량과 짧은 대기 시간을 제공하기 위해 캐시 계층을 추가 (일반 스토리지에 비해 10배 성능 향상)
    
    - 캐시 무효화 로직
        - 공통 저장소의 데이터가 업데이트 됨
        - 알림 대기열로 전송
        - 이벤트를 수신하면 오래된 데이터를 최신 데이터로 교체
        
        **이렇게 하면 분단위로 99.99% 데이터가 동일함**
        

- [ ]  캐시하고 실시간 캐시라는 것을 따로 둔다…
    
    → 이유는 일부 데이터는 바로바로 업데이트가 되어야 한다 대표적인 예가 품절같은 경우이다.
    
    2개의 캐시를 최신 시간으로 분류해서 확인을 한다